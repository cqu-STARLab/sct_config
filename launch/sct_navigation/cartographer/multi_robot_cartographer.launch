<launch>

    <arg name="base_frame"   default="base_link" />
    <arg name="odom_frame"   default="odom" />
    <arg name="map_frame"    default="map" />
    <arg name="robot_name" default="$(env ROBOT_NAME)" doc="Robot type [sct]"/>

    <env name="map_frame" value="$(arg robot_name)/$(arg map_frame)" />
    <env name="odom_frame" value="$(arg robot_name)/$(arg odom_frame)" />
    <env name="base_frame" value="$(arg robot_name)/$(arg base_frame)" />

    <group ns="$(arg robot_name)">

        <node name="cartographer_node" pkg="cartographer_ros"
          type="cartographer_node" args="
              -configuration_directory $(find sct_config)/config/sct_navigation/cartographer
              -configuration_basename cartographer_sct.lua"
          output="screen">

          <remap from="imu" to="ouster/imu"/>

        </node>

        <node name="cartographer_occupancy_grid_node" pkg="cartographer_ros"
            type="cartographer_occupancy_grid_node" args="-resolution 0.05" >
            <param name="odom_frame" value="$(arg robot_name)/$(arg odom_frame)"/>
            <param name="base_frame" value="$(arg robot_name)/$(arg base_frame)"/>
            <param name="radius" value="3.0"/>
        </node>
    </group>

    <!-- <node pkg="tf2_ros" type="static_transform_publisher" name="tf_carto_map_odom_$(arg robot_name)" args="0 0 0 0 0 0 $(arg robot_name)/$(arg map_frame) $(arg robot_name)/$(arg odom_frame)" /> -->

</launch>